<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nyelvtanuló</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  padding: 20px;
}
input, button {
  width: 100%;
  padding: 14px;
  margin-top: 10px;
  font-size: 18px;
}
button {
  background: #007AFF;
  color: white;
  border: none;
  border-radius: 8px;
}
</style>
</head>
<body>

<h2>Idegen szó</h2>
<input id="foreign" placeholder="pl. andare">

<h2>Magyar jelentés</h2>
<input id="hu" placeholder="pl. menni">

<h2>Várakozás (mp)</h2>
<input id="delay" type="number" value="3">

<button onclick="start()">START</button>

<script>
function speak(text, lang, rate = 0.9) {
  return new Promise(resolve => {
    const u = new SpeechSynthesisUtterance(text);
    u.lang = lang;
    u.rate = rate;
    u.onend = resolve;
    speechSynthesis.speak(u);
  });
}

function wait(sec) {
  return new Promise(r => setTimeout(r, sec * 1000));
}

async function runCycle(foreign, hu, delay) {
  // 5x: idegen → magyar
  for (let i = 0; i < 5; i++) {
    await speak(foreign, "it-IT");
    await wait(delay);
    await speak(hu, "hu-HU");
    await wait(delay);
  }

  // 5x: idegen → magyar (ismétlés)
  for (let i = 0; i < 5; i++) {
    await speak(foreign, "it-IT");
    await wait(delay);
    await speak(hu, "hu-HU");
    await wait(delay);
  }
}

function start() {
  speechSynthesis.cancel(); // iOS miatt fontos
  const foreign = document.getElementById("foreign").value;
  const hu = document.getElementById("hu").value;
  const delay = Number(document.getElementById("delay").value);

  if (!foreign || !hu) {
    alert("Írd be a szót és a jelentést!");
    return;
  }

  runCycle(foreign, hu, delay);
}
</script>

</body>
</html>
